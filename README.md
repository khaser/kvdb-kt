# Курс основ программирования на МКН СПбГУ
## Проект 2: key-value база данных

[Постановка задачи](./TASK.md)

### Запуск
Для удобной проверки проект скомпилирован в виде jar файла diff-kt.jar и запускается следующей командой.
```sh 
java -jar kvdb-kt.jar MODE [OPTIONS] DB-FILE
Example: java -jar kvdb-kt.jar create -p 10 -v 10 new.db 
```
Так же написана оболочка на bash позволяющая запускать утилиту командой. (Только Linux и MacOS)
```sh
./kvdb MODE [OPTIONS] DB-FILE
```
Приложение не имеет графической оболочки и запускается только этими способами или в среде разработки. Всё поведение программы задаётся только переданными опциями. При возникновении исключений во время работы программа может уточнить, что ей делать в той или иной ситуации.
#### Возможные проблемы с совместимостью
Программа тестировалась на Linux. В связи с этим утилита может не работать должным образом на Вашей системе.
#### А можно ли использовать пробелы в именах ключей и значений?
Конечно можно, для этого для этого Вам необходимо заключить ключи или значения в кавычки, подобно тому, как это делается в остальных LINUX-like утилитах. Будьте внимательнее, следующие ключи не равны.
``'key ' != 'key'`` Это происходит потому, что база данных никак не изменяет вводимые пользователем значения.21
### Файлы для тестирования
Файлы для проверки работоспособности программы находятся в директории [testFiles](./testFiles).

### Опции программы
Имена файлов передаются в качестве двух последних опций
Все опции программы на английском языке можно посмотреть при помощи встроенной справки.
Здесь будет чуть более подробное описание на русском.
+ ``create [OPTIONS]`` - создать новую базу данных с параметрами, описанными ниже
    + ``--partitions or -p NUM (Default=5000)`` - Устанавливает количесво разделов в базе данных. Чем больше разделов, тем выше быстродействие, но тем больший объём памяти занимает пустая база данных.
    + ``--keysize or -k NUM (Default=255)`` - устанавливает максимальный размер поля для ключа
    + ``--valuesize or -v NUM (Default=255)`` - устанавливает максимальных размер поля для значения
    + ``--defautvalue or -d STR (Default='')``- устанавливает значение по умолчанию
+ ``get KEY`` - Получить значение по ключу
+ ``set KEY VALUE`` - Присвоить ключу заданное значение
+ ``remove KEY`` - Удалить ключ и значение из базы данных
+ ``dump`` - Выводит все пары ключ, значение
+ ``shrink [OPTIONS]`` - перестраивает базу данных используя опции, аналогичные опциям для команды ``create``
+ ``config`` - выводит текущую конфигурацию указанной базы данных